(globalThis.webpackChunkauth=globalThis.webpackChunkauth||[]).push([[910,388],{3936:(e,t,r)=>{"use strict";r.d(t,{d:()=>s,T:()=>o});const s={url:"signIn"},o={url:"signOut"}},7743:(e,t,r)=>{"use strict";r.d(t,{Q:()=>c});var s=r(6878),o=r(2482),n=r(8064),a=function(e,t,r,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,s);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a};let c=class{provider;cache;httpClient;cacheKey="signInResponse";authHeaderKey="x-authentication-token";id=Math.random();constructor(e){this.provider=e,console.log("constructor => this.cache",this.cache),this.initTokenFromCache()}get response(){return this.cache.get(this.cacheKey)}get currentUser(){return this.response.credential}async signIn(e){const t=await this.provider.signIn(e);return this.useResponse(t),t}async signOut(){const e=this.response?.token;if(e){if(!await this.provider.signOut({token:e}))throw new Error("Sign out failed");this.removeCache(),this.removeAuthToken()}}useResponse(e){this.cacheResponse(e),this.setAuthToken(e.token)}cacheResponse(e){this.cache.set(this.cacheKey,e)}initTokenFromCache(){const e=this.response;e&&this.setAuthToken(e.token)}setAuthToken(e){this.httpClient.setHeader(this.authHeaderKey,e),s.globalModule.addToSharedHeaders({[this.authHeaderKey]:e})}removeCache(){this.cache.remove(this.cacheKey)}removeAuthToken(){this.httpClient.setHeader(this.authHeaderKey,""),s.globalModule.removeSharedHeaders(this.authHeaderKey)}};a([n.D.cache(s.SessionStorageCache)],c.prototype,"cache",void 0),a([n.D.client()],c.prototype,"httpClient",void 0),c=a([n.b.controller({provider:o.H})],c);const i=new c;console.log(i.cache)},2482:(e,t,r)=>{"use strict";r.d(t,{H:()=>a});var s=r(8064),o=r(7158),n=r(3936);let a=class extends o.Z{baseUrl="core/auth";signIn(e){return this.post(n.d,e)}signOut(e){return this.post(n.T,e)}};a=function(e,t,r,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,s);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a}([s.b.provider()],a)},9910:(e,t,r)=>{"use strict";r.r(t),r.d(t,{authModule:()=>s.authModule,AuthController:()=>o.Q,AuthProvider:()=>n.H});var s=r(4388),o=r(7743),n=r(2482)},8064:(e,t,r)=>{"use strict";r.d(t,{D:()=>o,b:()=>n});var s=r(6878);const o=new s.ResolveDecorators,n=new s.InjectableDecorators},4388:(e,t,r)=>{"use strict";r.r(t),r.d(t,{authModule:()=>a});var s=r(6878),o=r(8064);class n extends s.CoreModule{id=Math.random()}const a=new n;a.registerCache(s.SessionStorageCache),a.registerHttpClient(s.FetchHTTPClient,{hostName:"api.comed.com.tr",languagePrefix:"tr-tr",prefix:"api/json",headers:{"x-application-key":"/uq+fiM1AzYe7bHAJCixzg==","content-type":"application/json"}}),a.useDecorators(o.b,o.D)},7158:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(6878);class o extends s.CoreProvider{async post(e,t,r){return(await super.post(e,t,r)).data}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdXRoLy4vc3JjL2F1dGgvYXV0aC5jb25maWcudHMiLCJ3ZWJwYWNrOi8vYXV0aC8uL3NyYy9hdXRoL2F1dGguY29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9hdXRoLy4vc3JjL2F1dGgvYXV0aC5wcm92aWRlci50cyIsIndlYnBhY2s6Ly9hdXRoLy4vc3JjL2NvbmZpZ3VyYXRpb25zL2RlY29yYXRvcnMudHMiLCJ3ZWJwYWNrOi8vYXV0aC8uL3NyYy9jb25maWd1cmF0aW9ucy9tb2R1bGUudHMiLCJ3ZWJwYWNrOi8vYXV0aC8uLi9jb3JlL3NyYy9yZXNwb25zZS9iYXNlLnByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbInNpZ25JblJlcXVlc3RDb25maWciLCJ1cmwiLCJzaWduT3V0UmVxdWVzdENvbmZpZyIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImQiLCJjIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsImkiLCJkZWZpbmVQcm9wZXJ0eSIsIkF1dGhDb250cm9sbGVyIiwiTWF0aCIsInJhbmRvbSIsInByb3ZpZGVyIiwidGhpcyIsImNvbnNvbGUiLCJsb2ciLCJjYWNoZSIsImluaXRUb2tlbkZyb21DYWNoZSIsImdldCIsImNhY2hlS2V5IiwicmVzcG9uc2UiLCJjcmVkZW50aWFsIiwicmVxdWVzdCIsInNpZ25JbiIsInVzZVJlc3BvbnNlIiwidG9rZW4iLCJzaWduT3V0IiwiRXJyb3IiLCJyZW1vdmVDYWNoZSIsInJlbW92ZUF1dGhUb2tlbiIsImNhY2hlUmVzcG9uc2UiLCJzZXRBdXRoVG9rZW4iLCJzZXQiLCJodHRwQ2xpZW50Iiwic2V0SGVhZGVyIiwiYXV0aEhlYWRlcktleSIsImdsb2JhbE1vZHVsZSIsInJlbW92ZSIsIlNlc3Npb25TdG9yYWdlQ2FjaGUiLCJwcm90b3R5cGUiLCJjb250cm9sbGVyIiwiQXV0aFByb3ZpZGVyIiwicG9zdCIsInJlc29sdmUiLCJSZXNvbHZlRGVjb3JhdG9ycyIsImluamVjdGFibGUiLCJJbmplY3RhYmxlRGVjb3JhdG9ycyIsIkF1dGhNb2R1bGUiLCJDb3JlTW9kdWxlIiwiYXV0aE1vZHVsZSIsInJlZ2lzdGVyQ2FjaGUiLCJyZWdpc3Rlckh0dHBDbGllbnQiLCJGZXRjaEhUVFBDbGllbnQiLCJob3N0TmFtZSIsImxhbmd1YWdlUHJlZml4IiwicHJlZml4IiwiaGVhZGVycyIsInVzZURlY29yYXRvcnMiLCJCYXNlUHJvdmlkZXIiLCJDb3JlUHJvdmlkZXIiLCJjb25maWciLCJvcHRpb25zIiwic3VwZXIiLCJkYXRhIl0sIm1hcHBpbmdzIjoib0lBQU8sTUFBTUEsRUFBc0IsQ0FDL0JDLElBQUssVUFFSUMsRUFBdUIsQ0FDaENELElBQUssWSwrRUNKTEUsRUFBMEMsU0FBVUMsRUFBWUMsRUFBUUMsRUFBS0MsR0FDN0UsSUFBMkhDLEVBQXZIQyxFQUFJQyxVQUFVQyxPQUFRQyxFQUFJSCxFQUFJLEVBQUlKLEVBQWtCLE9BQVRFLEVBQWdCQSxFQUFPTSxPQUFPQyx5QkFBeUJULEVBQVFDLEdBQU9DLEVBQ3JILEdBQXVCLGlCQUFaUSxTQUFvRCxtQkFBckJBLFFBQVFDLFNBQXlCSixFQUFJRyxRQUFRQyxTQUFTWixFQUFZQyxFQUFRQyxFQUFLQyxRQUNwSCxJQUFLLElBQUlVLEVBQUliLEVBQVdPLE9BQVMsRUFBR00sR0FBSyxFQUFHQSxLQUFTVCxFQUFJSixFQUFXYSxNQUFJTCxHQUFLSCxFQUFJLEVBQUlELEVBQUVJLEdBQUtILEVBQUksRUFBSUQsRUFBRUgsRUFBUUMsRUFBS00sR0FBS0osRUFBRUgsRUFBUUMsS0FBU00sR0FDaEosT0FBT0gsRUFBSSxHQUFLRyxHQUFLQyxPQUFPSyxlQUFlYixFQUFRQyxFQUFLTSxHQUFJQSxHQUtoRSxJQUFJTyxFQUFpQixNQUNqQixTQUNBLE1BQ0EsV0FDQSxTQUFXLGlCQUNYLGNBQWdCLHlCQUNoQixHQUFLQyxL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QixzQkFHeEJQLEVBQVdRLGNBQWMsSUFBWSxNLDJEQ2Y5QixNQUFNQyxVQUFxQixFQUFBQyxhQUM5QixXQUFXQyxFQUFRdEMsRUFBU3VDLEdBRXhCLGFBRHVCQyxNQUFNcEIsS0FBS2tCLEVBQVF0QyxFQUFTdUMsSUFDbkNFIiwiZmlsZSI6IjkxMC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2lnbkluUmVxdWVzdENvbmZpZyA9IHtcclxuICAgIHVybDogXCJzaWduSW5cIixcclxufTtcclxuZXhwb3J0IGNvbnN0IHNpZ25PdXRSZXF1ZXN0Q29uZmlnID0ge1xyXG4gICAgdXJsOiBcInNpZ25PdXRcIixcclxufTtcclxuIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0IHsgZ2xvYmFsTW9kdWxlLCBTZXNzaW9uU3RvcmFnZUNhY2hlLCB9IGZyb20gXCJAc2FiYXNheWVyL21vZHVsZS5jb3JlXCI7XHJcbmltcG9ydCB7IEF1dGhQcm92aWRlciB9IGZyb20gXCIuL2F1dGgucHJvdmlkZXJcIjtcclxuaW1wb3J0IHsgaW5qZWN0YWJsZSwgcmVzb2x2ZSB9IGZyb20gXCIuLi9jb25maWd1cmF0aW9ucy9kZWNvcmF0b3JzXCI7XHJcbmxldCBBdXRoQ29udHJvbGxlciA9IGNsYXNzIEF1dGhDb250cm9sbGVyIHtcclxuICAgIHByb3ZpZGVyO1xyXG4gICAgY2FjaGU7XHJcbiAgICBodHRwQ2xpZW50O1xyXG4gICAgY2FjaGVLZXkgPSBcInNpZ25JblJlc3BvbnNlXCI7XHJcbiAgICBhdXRoSGVhZGVyS2V5ID0gXCJ4LWF1dGhlbnRpY2F0aW9uLXRva2VuXCI7XHJcbiAgICBpZCA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcikge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXIgPSBwcm92aWRlcjtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNvbnN0cnVjdG9yID0+IHRoaXMuY2FjaGVcIiwgdGhpcy5jYWNoZSk7XHJcbiAgICAgICAgdGhpcy5pbml0VG9rZW5Gcm9tQ2FjaGUoKTtcclxuICAgIH1cclxuICAgIGdldCByZXNwb25zZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5nZXQodGhpcy5jYWNoZUtleSk7XHJcbiAgICB9XHJcbiAgICBnZXQgY3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2UuY3JlZGVudGlhbDtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25JbihyZXF1ZXN0KSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnByb3ZpZGVyLnNpZ25JbihyZXF1ZXN0KTtcclxuICAgICAgICB0aGlzLnVzZVJlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzaWduT3V0KCkge1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gdGhpcy5yZXNwb25zZT8udG9rZW47XHJcbiAgICAgICAgaWYgKCF0b2tlbilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wcm92aWRlci5zaWduT3V0KHsgdG9rZW4gfSk7XHJcbiAgICAgICAgaWYgKCFyZXNwb25zZSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbiBvdXQgZmFpbGVkXCIpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQ2FjaGUoKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUF1dGhUb2tlbigpO1xyXG4gICAgfVxyXG4gICAgdXNlUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgICAgICB0aGlzLmNhY2hlUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIHRoaXMuc2V0QXV0aFRva2VuKHJlc3BvbnNlLnRva2VuKTtcclxuICAgIH1cclxuICAgIGNhY2hlUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgICAgICB0aGlzLmNhY2hlLnNldCh0aGlzLmNhY2hlS2V5LCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICBpbml0VG9rZW5Gcm9tQ2FjaGUoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghcmVzcG9uc2UpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLnNldEF1dGhUb2tlbihyZXNwb25zZS50b2tlbik7XHJcbiAgICB9XHJcbiAgICBzZXRBdXRoVG9rZW4odG9rZW4pIHtcclxuICAgICAgICB0aGlzLmh0dHBDbGllbnQuc2V0SGVhZGVyKHRoaXMuYXV0aEhlYWRlcktleSwgdG9rZW4pO1xyXG4gICAgICAgIGdsb2JhbE1vZHVsZS5hZGRUb1NoYXJlZEhlYWRlcnMoeyBbdGhpcy5hdXRoSGVhZGVyS2V5XTogdG9rZW4gfSk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVDYWNoZSgpIHtcclxuICAgICAgICB0aGlzLmNhY2hlLnJlbW92ZSh0aGlzLmNhY2hlS2V5KTtcclxuICAgIH1cclxuICAgIHJlbW92ZUF1dGhUb2tlbigpIHtcclxuICAgICAgICB0aGlzLmh0dHBDbGllbnQuc2V0SGVhZGVyKHRoaXMuYXV0aEhlYWRlcktleSwgXCJcIik7XHJcbiAgICAgICAgZ2xvYmFsTW9kdWxlLnJlbW92ZVNoYXJlZEhlYWRlcnModGhpcy5hdXRoSGVhZGVyS2V5KTtcclxuICAgIH1cclxufTtcclxuX19kZWNvcmF0ZShbXHJcbiAgICByZXNvbHZlLmNhY2hlKFNlc3Npb25TdG9yYWdlQ2FjaGUpXHJcbl0sIEF1dGhDb250cm9sbGVyLnByb3RvdHlwZSwgXCJjYWNoZVwiLCB2b2lkIDApO1xyXG5fX2RlY29yYXRlKFtcclxuICAgIHJlc29sdmUuY2xpZW50KClcclxuXSwgQXV0aENvbnRyb2xsZXIucHJvdG90eXBlLCBcImh0dHBDbGllbnRcIiwgdm9pZCAwKTtcclxuQXV0aENvbnRyb2xsZXIgPSBfX2RlY29yYXRlKFtcclxuICAgIGluamVjdGFibGUuY29udHJvbGxlcih7IHByb3ZpZGVyOiBBdXRoUHJvdmlkZXIgfSlcclxuXSwgQXV0aENvbnRyb2xsZXIpO1xyXG5leHBvcnQgeyBBdXRoQ29udHJvbGxlciB9O1xyXG5jb25zdCBjb250cm9sbGVyID0gbmV3IEF1dGhDb250cm9sbGVyKCk7XHJcbmNvbnNvbGUubG9nKGNvbnRyb2xsZXIuY2FjaGUpO1xyXG4iLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59O1xyXG5pbXBvcnQgeyBpbmplY3RhYmxlIH0gZnJvbSBcIi4uL2NvbmZpZ3VyYXRpb25zL2RlY29yYXRvcnNcIjtcclxuaW1wb3J0IHsgQmFzZVByb3ZpZGVyIH0gZnJvbSBcImNvcmUvc3JjL3Jlc3BvbnNlL2Jhc2UucHJvdmlkZXJcIjtcclxuaW1wb3J0IHsgc2lnbkluUmVxdWVzdENvbmZpZywgc2lnbk91dFJlcXVlc3RDb25maWcgfSBmcm9tIFwiLi9hdXRoLmNvbmZpZ1wiO1xyXG5sZXQgQXV0aFByb3ZpZGVyID0gY2xhc3MgQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZVByb3ZpZGVyIHtcclxuICAgIGJhc2VVcmwgPSBcImNvcmUvYXV0aFwiO1xyXG4gICAgc2lnbkluKHJlcXVlc3QpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3N0KHNpZ25JblJlcXVlc3RDb25maWcsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgc2lnbk91dChyZXF1ZXN0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdChzaWduT3V0UmVxdWVzdENvbmZpZywgcmVxdWVzdCk7XHJcbiAgICB9XHJcbn07XHJcbkF1dGhQcm92aWRlciA9IF9fZGVjb3JhdGUoW1xyXG4gICAgaW5qZWN0YWJsZS5wcm92aWRlcigpXHJcbl0sIEF1dGhQcm92aWRlcik7XHJcbmV4cG9ydCB7IEF1dGhQcm92aWRlciB9O1xyXG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlRGVjb3JhdG9ycywgUmVzb2x2ZURlY29yYXRvcnMsIH0gZnJvbSBcIkBzYWJhc2F5ZXIvbW9kdWxlLmNvcmVcIjtcclxuY29uc3QgcmVzb2x2ZSA9IG5ldyBSZXNvbHZlRGVjb3JhdG9ycygpO1xyXG5jb25zdCBpbmplY3RhYmxlID0gbmV3IEluamVjdGFibGVEZWNvcmF0b3JzKCk7XHJcbmV4cG9ydCB7IHJlc29sdmUsIGluamVjdGFibGUgfTtcclxuIiwiaW1wb3J0IHsgQ29yZU1vZHVsZSwgRmV0Y2hIVFRQQ2xpZW50LCBTZXNzaW9uU3RvcmFnZUNhY2hlLCB9IGZyb20gXCJAc2FiYXNheWVyL21vZHVsZS5jb3JlXCI7XHJcbmltcG9ydCB7IGluamVjdGFibGUsIHJlc29sdmUgfSBmcm9tIFwiLi9kZWNvcmF0b3JzXCI7XHJcbmNsYXNzIEF1dGhNb2R1bGUgZXh0ZW5kcyBDb3JlTW9kdWxlIHtcclxuICAgIGlkID0gTWF0aC5yYW5kb20oKTtcclxufVxyXG5jb25zdCBhdXRoTW9kdWxlID0gbmV3IEF1dGhNb2R1bGUoKTtcclxuYXV0aE1vZHVsZS5yZWdpc3RlckNhY2hlKFNlc3Npb25TdG9yYWdlQ2FjaGUpO1xyXG5hdXRoTW9kdWxlLnJlZ2lzdGVySHR0cENsaWVudChGZXRjaEhUVFBDbGllbnQsIHtcclxuICAgIGhvc3ROYW1lOiBcImFwaS5jb21lZC5jb20udHJcIixcclxuICAgIGxhbmd1YWdlUHJlZml4OiBcInRyLXRyXCIsXHJcbiAgICBwcmVmaXg6IFwiYXBpL2pzb25cIixcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBcIngtYXBwbGljYXRpb24ta2V5XCI6IFwiL3VxK2ZpTTFBelllN2JIQUpDaXh6Zz09XCIsXHJcbiAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICB9LFxyXG59KTtcclxuYXV0aE1vZHVsZS51c2VEZWNvcmF0b3JzKGluamVjdGFibGUsIHJlc29sdmUpO1xyXG5leHBvcnQgeyBhdXRoTW9kdWxlIH07XHJcbiIsImltcG9ydCB7IENvcmVQcm92aWRlciwgfSBmcm9tIFwiQHNhYmFzYXllci9tb2R1bGUuY29yZVwiO1xyXG5leHBvcnQgY2xhc3MgQmFzZVByb3ZpZGVyIGV4dGVuZHMgQ29yZVByb3ZpZGVyIHtcclxuICAgIGFzeW5jIHBvc3QoY29uZmlnLCByZXF1ZXN0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdXBlci5wb3N0KGNvbmZpZywgcmVxdWVzdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==